<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ScamSafe - Public welfare initiative providing cybersecurity fraud awareness and education">
    <meta name="keywords" content="scam protection, fraud awareness, cybersecurity education">
    <meta name="author" content="ScamSafe Team">

    <title>ScamSafe - Cybersecurity Fraud Protection</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">

    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="./css/variables.css">
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/layout.css">
    <link rel="stylesheet" href="./css/responsive.css">
    <style>
        .font-controls {
            display: flex !important;
            align-items: center !important;
            gap: 4px !important;
            background: rgba(51, 65, 85, 0.5) !important;
            padding: 4px !important;
            border-radius: 12px !important;
        }

        .font-btn {
            width: 36px !important;
            height: 36px !important;
            border: none !important;
            border-radius: 8px !important;
            background: transparent !important;
            color: #94a3b8 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .font-btn:hover {
            background: rgba(59, 130, 246, 0.2) !important;
            color: #cbd5e1 !important;
            transform: scale(1.05) !important;
        }

        .font-btn.active {
            background: #3b82f6 !important;
            color: white !important;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3) !important;
        }

        .font-btn:focus {
            outline: 2px solid #3b82f6 !important;
            outline-offset: 2px !important;
        }
        body,
        .hero-title,
        .hero-subtitle,
        .section-title,
        .alert-title,
        .alert-description,
        p, h1, h2, h3, h4, h5, h6 {
            font-size: calc(1em * var(--current-font-scale)) !important;
        }
    </style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar" id="navbar">
    <div class="nav-container">
        <a href="#" class="logo">
            <i class="fas fa-shield-check logo-icon"></i>
            <span>ScamSafe</span>
        </a>
        <div class="nav-controls">
            <ul class="nav-links">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#insights" class="nav-link">Insights</a></li>
                <li><a href="#education" class="nav-link">Education</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            <div class="font-controls">
                <button class="font-btn" data-size="small" title="Small Font" aria-label="Small Font Size">
                    <span style="font-size: 12px; font-weight: bold;">a</span>
                </button>
                <button class="font-btn active" data-size="normal" title="Normal Font" aria-label="Normal Font Size">
                    <span style="font-size: 14px; font-weight: bold;">A</span>
                </button>
                <button class="font-btn" data-size="large" title="Large Font" aria-label="Large Font Size">
                    <span style="font-size: 18px; font-weight: bold;">AA</span>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section class="hero" id="home">
    <div class="hero-content">
        <h1 class="hero-title">2025 Cybersecurity Fraud Impact Report</h1>
        <p class="hero-subtitle">
            Public Welfare Initiative - Raising awareness about the devastating impact of cybersecurity fraud through real-time threat intelligence and educational resources.
        </p>
        <div class="hero-stats">
            <div class="stat-item">
                <div class="stat-number">890M</div>
                <div class="stat-label">Global Victims in 2025</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">$2.8T</div>
                <div class="stat-label">Total Economic Losses</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">156%</div>
                <div class="stat-label">Year-over-Year Growth</div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<main class="container">
    <!-- Section Header -->
    <div class="section-header">
        <h2 class="section-title">Active Threat Alerts</h2>
        <div class="last-updated">
            <i class="fas fa-clock"></i>
            <span id="last-update-time">Last Updated: August 28, 2025, 14:30 UTC</span>
        </div>
    </div>

    <!-- Filter Controls -->
    <div class="controls">
        <div class="filter-section">
            <span class="filter-label">Filter by threat type:</span>
            <div class="filter-tabs" id="filter-tabs">
                <button class="filter-tab active" data-filter="all">
                    <i class="fas fa-list"></i> All Threats
                </button>
                <button class="filter-tab" data-filter="sms">
                    <i class="fas fa-mobile-alt"></i> SMS
                </button>
                <button class="filter-tab" data-filter="phone">
                    <i class="fas fa-phone"></i> Voice
                </button>
                <button class="filter-tab" data-filter="email">
                    <i class="fas fa-envelope"></i> Email
                </button>
                <button class="filter-tab" data-filter="investment">
                    <i class="fas fa-chart-line"></i> Financial
                </button>
            </div>
        </div>
        <button class="refresh-btn" id="refresh-btn">
            <i class="fas fa-sync-alt"></i>
            Update Feed
        </button>
    </div>

    <!-- Alerts Grid -->
    <div class="alerts-grid" id="alerts-grid">
        <!-- Alert cards will be dynamically loaded here -->
    </div>

    <!-- Loading State -->
    <div class="loading-container" id="loading-container" style="display: none;">
        <div class="spinner"></div>
        <p>Loading threat alerts...</p>
    </div>

    <!-- Error State -->
    <div class="error-container" id="error-container" style="display: none;">
        <div class="error-message">
            <i class="fas fa-exclamation-triangle"></i>
            <p>Unable to load threat data. Please try again later.</p>
            <button class="retry-btn" id="retry-btn">Retry</button>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-links">
            <a href="#privacy">Privacy Policy</a>
            <a href="#terms">Terms of Service</a>
            <a href="#accessibility">Accessibility</a>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
            <a href="#sitemap">Site Map</a>
        </div>
        <div class="footer-disclaimer">
            <p>This website is maintained by ScamSafe as a public welfare initiative. Information provided is for educational purposes only. We are dedicated to preventing cybersecurity fraud through community awareness and education.</p>
        </div>
    </div>
</footer>

<!-- JavaScript -->
<script src="./js/config.js"></script>
<script src="./js/utils.js"></script>
<script src="./js/components/fontController.js"></script>
<script src="./js/components/alertManager.js"></script>
<script src="./js/components/filterController.js"></script>
<script src="./js/main.js"></script>
</body>
<script>
    // 紧急修复：简单的字体控制实现
    (function() {
        console.log('应用字体控制修复补丁...');

        // 等待DOM加载
        function initFontControlFix() {
            // 设置默认CSS变量
            const root = document.documentElement;
            if (!root.style.getPropertyValue('--current-font-scale')) {
                root.style.setProperty('--current-font-scale', '1');
            }

            // 获取所有字体按钮
            const fontButtons = document.querySelectorAll('.font-btn');

            if (fontButtons.length === 0) {
                console.error('未找到字体控制按钮');
                return;
            }

            console.log(`找到 ${fontButtons.length} 个字体按钮`);

            // 字体大小配置
            const fontSizes = {
                small: 0.9,
                normal: 1.0,
                large: 1.1
            };

            // 从localStorage加载保存的设置
            const savedSize = localStorage.getItem('scamsafe_font_size');
            if (savedSize && fontSizes[savedSize]) {
                root.style.setProperty('--current-font-scale', fontSizes[savedSize]);

                // 更新按钮状态
                fontButtons.forEach(btn => {
                    if (btn.dataset.size === savedSize) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            }

            // 为每个按钮添加点击事件
            fontButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const size = this.dataset.size;
                    const scale = fontSizes[size];

                    if (!scale) {
                        console.error('无效的字体大小:', size);
                        return;
                    }

                    console.log(`设置字体大小: ${size} (${scale}x)`);

                    // 更新CSS变量
                    root.style.setProperty('--current-font-scale', scale);

                    // 更新按钮状态
                    fontButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');

                    // 保存到localStorage
                    try {
                        localStorage.setItem('scamsafe_font_size', size);
                        console.log('字体大小已保存');
                    } catch (error) {
                        console.error('保存失败:', error);
                    }

                    // 添加视觉反馈
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });

            // 添加键盘快捷键支持
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    let newSize = null;

                    switch(e.key) {
                        case '+':
                        case '=':
                            e.preventDefault();
                            const currentScalePlus = parseFloat(root.style.getPropertyValue('--current-font-scale') || 1);
                            if (currentScalePlus < 1.1) {
                                newSize = currentScalePlus < 1 ? 'normal' : 'large';
                            }
                            break;
                        case '-':
                        case '_':
                            e.preventDefault();
                            const currentScaleMinus = parseFloat(root.style.getPropertyValue('--current-font-scale') || 1);
                            if (currentScaleMinus > 0.9) {
                                newSize = currentScaleMinus > 1 ? 'normal' : 'small';
                            }
                            break;
                        case '0':
                            e.preventDefault();
                            newSize = 'normal';
                            break;
                    }

                    if (newSize) {
                        // 触发对应按钮的点击事件
                        const targetButton = document.querySelector(`.font-btn[data-size="${newSize}"]`);
                        if (targetButton) {
                            targetButton.click();
                        }
                    }
                }
            });

            console.log('字体控制修复补丁应用成功');
        }

        // 确保DOM加载完成后再初始化
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initFontControlFix);
        } else {
            // DOM已经加载完成，直接初始化
            setTimeout(initFontControlFix, 100);
        }
    })();
</script>
</html>